<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin</title>
    <style>
        body { background: #0f172a; color: white; font-family: sans-serif; margin: 0; padding-bottom: 50px; }
        .admin-card { background: #1e293b; padding: 20px; border-radius: 12px; margin: 15px; box-shadow: 0 4px 10px rgba(0,0,0,0.3); }
        h3 { color: #38bdf8; text-align: center; }
        input, select { width: 100%; padding: 12px; margin: 8px 0; border-radius: 8px; background: #0f172a; border: 1px solid #334155; color: white; box-sizing: border-box; }
        button { width: 100%; padding: 12px; border-radius: 8px; border: none; background: #38bdf8; color: white; font-weight: bold; cursor: pointer; margin-top: 10px; }
        .delete-btn { background: #ef4444; width: auto; padding: 5px 10px; }
        .admin-item { display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #334155; padding: 10px 0; }
        #login-section { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #0f172a; display: flex; align-items: center; justify-content: center; z-index: 9999; }
    </style>
</head>
<body>

    <div id="login-section">
        <div class="admin-card" style="width: 300px;">
            <h3>Admin Login</h3>
            <input type="email" id="adminEmail" placeholder="Email...">
            <input type="password" id="adminPass" placeholder="Password...">
            <button onclick="login()">Login</button>
        </div>
    </div>

    <div id="admin-dashboard" style="display: none;">
        <div class="admin-card">
            <h3>Upload New Game</h3>
            <input type="text" id="gName" placeholder="ဂိမ်းနာမည်">
            <input type="text" id="gImg" placeholder="ဂိမ်းပုံ Link (URL)">
            <input type="text" id="gLink" placeholder="Download Link">
            <select id="gCategory">
                <option value="Action">Action</option>
                <option value="Racing">Racing</option>
                <option value="Horror">Horror</option>
                <option value="Adventure">Adventure</option>
            </select>
            <button onclick="uploadGame()">Upload</button>
            <button onclick="logout()" style="background: #475569;">Logout</button>
        </div>

        <div class="admin-card">
            <h3>Manage Game</h3>
            <div id="admin-game-list"></div>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-database-compat.js"></script>

    <script>
        // ဒီနေရာမှာ မင်းရဲ့ Firebase Config တွေကို ပြန်ထည့်ပါ
        const firebaseConfig = {
            apiKey: "AIzaSyBIZFcFZWIuRvCxzJY4asMgVTOrlLufXFU",
            databaseURL: "https://game-a5d95-default-rtdb.firebaseio.com/",
            projectId: "game-a5d95"
        };
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.database();

        // Login Check
        auth.onAuthStateChanged((user) => {
            if (user) {
                document.getElementById('login-section').style.display = 'none';
                document.getElementById('admin-dashboard').style.display = 'block';
                loadAdminGames();
            } else {
                document.getElementById('login-section').style.display = 'flex';
                document.getElementById('admin-dashboard').style.display = 'none';
            }
        });

        function login() {
            const email = document.getElementById('adminEmail').value;
            const pass = document.getElementById('adminPass').value;
            auth.signInWithEmailAndPassword(email, pass).catch(e => alert(e.message));
        }

        function logout() { auth.signOut(); }

        function uploadGame() {
            const name = document.getElementById('gName').value;
            const img = document.getElementById('gImg').value;
            const link = document.getElementById('gLink').value;
            const cat = document.getElementById('gCategory').value;

            if(name && img && link) {
                db.ref('games').push({ title: name, image: img, download: link, category: cat })
                .then(() => { alert("Done"); location.reload(); });
            }
        }

        function loadAdminGames() {
            db.ref('games').on('value', (snap) => {
                const list = document.getElementById('admin-game-list');
                list.innerHTML = "";
                snap.forEach((child) => {
                    list.innerHTML += `
                        <div class="admin-item">
                            <span>${child.val().title}</span>
                            <button class="delete-btn" onclick="deleteGame('${child.key}')">Delete</button>
                        </div>
                    `;
                });
            });
        }

        function deleteGame(id) {
            if(confirm("Are U Sure to delete?")) db.ref('games').child(id).remove();
        }
    </script>
</body>
<            <option value="Action">Action</option>
            <option value="Racing">Racing</option>
            <option value="Horror">Horror</option>
            <option value="Adventure">Adventure</option>
        </select>

        <button onclick="uploadGame()">Upload</button>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-database-compat.js"></script>
    <script>
        // 
const randomPW = Math.floor(1000 + Math.random() * 9000).toString();

// 
console.log("Admin Random Password is: " + randomPW);

// Emergency Password
const emergencyPW = "9999"; 

function checkLogin() {
    const pass = document.getElementById('passInput').value;

    
    if(pass === randomPW || pass === emergencyPW) {
        alert("Login Success!");
        document.getElementById('loginBox').style.display = "none";
    } else {
        alert("incorrect password!");
    }
        }
        
    </script>
</body>
</html>
