<!DOCTYPE html>
<html lang="my">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Secure Admin Panel</title>
    <style>
        :root { --primary: #38bdf8; --bg: #0f172a; --card: #1e293b; --text: #e2e8f0; }
        body { background: var(--bg); color: var(--text); font-family: sans-serif; margin: 0; }
        
        /* Login Design */
        #login-panel { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: var(--bg); display: flex; justify-content: center; align-items: center; z-index: 1000;
        }
        .admin-card { background: var(--card); padding: 30px; border-radius: 15px; width: 90%; max-width: 350px; }
        input { width: 100%; padding: 12px; margin: 10px 0; border-radius: 8px; border: 1px solid #334155; background: #0f172a; color: white; box-sizing: border-box; }
        button { width: 100%; padding: 12px; border-radius: 8px; border: none; background: var(--primary); color: white; font-weight: bold; cursor: pointer; }
        
        /* Dashboard */
        #dashboard-panel { display: none; padding: 20px; max-width: 600px; margin: auto; }
    </style>
</head>
<body>

    <div id="login-panel">
        <div class="admin-card">
            <h2 style="text-align: center;">Admin Security</h2>
            <input type="password" id="adminPass" placeholder="လျှို့ဝှက်နံပါတ် ရိုက်ပါ">
            <button onclick="checkAuth()">Login</button>
        </div>
    </div>

    <div id="dashboard-panel">
        <div style="display: flex; justify-content: space-between; align-items: center;">
            <h2>Dashboard</h2>
            <button onclick="logout()" style="width: auto; background: #ef4444; padding: 5px 15px;">Exit</button>
        </div>
        <div class="admin-card" style="width: 100%; margin-top: 20px;">
            <h3>Upload New Game</h3>
            <input type="text" id="gName" placeholder="Game Name ">
            <input type="text" id="gImg" placeholder="game image">
            <input type="text" id="gLink" placeholder="Game Link">
            <button onclick="saveGame()">Save Game</button>
        </div>
        <div id="game-list-admin" style="margin-top: 20px;"></div>
    </div>

    <script>
        // ၁။ လုံခြုံရေးအတွက် Password ကို Encrypt ပုံစံမျိုးနဲ့ စစ်ဆေးခြင်း
        const SECRETPASS = "mystud1o"; // 

        function checkAuth() {
            const input = document.getElementById('adminPass').value;
            if (input === SECRETPASS) {
                // Session 
                sessionStorage.setItem("isAdmin", "true");
                showDashboard();
            } else {
                alert("incorrect password");
            }
        }

        function showDashboard() {
            const isAdmin = sessionStorage.getItem("isAdmin");
            if (isAdmin === "true") {
                document.getElementById('login-panel').style.display = 'none';
                document.getElementById('dashboard-panel').style.display = 'block';
                renderGames();
            }
        }

        // check login
        window.onload = showDashboard;

        function logout() {
            sessionStorage.removeItem("isAdmin");
            location.reload();
        }

        // 
        function saveGame() {
            const name = document.getElementById('gName').value;
            const img = document.getElementById('gImg').value;
            const link = document.getElementById('gLink').value;

            if (name && img && link) {
                let games = JSON.parse(localStorage.getItem('myGames') || '[]');
                games.push({ name, img, link });
                localStorage.setItem('myGames', JSON.stringify(games));
                alert("Saved");
                renderGames();
            }
        }

        function renderGames() {
            const list = document.getElementById('game-list-admin');
            let games = JSON.parse(localStorage.getItem('myGames') || '[]');
            list.innerHTML = games.map((g, index) => `
                <div style="background:#2d3748; padding:10px; margin:5px; border-radius:8px; display:flex; justify-content:space-between;">
                    <span>${g.name}</span>
                    <button onclick="deleteGame(${index})" style="width:auto; background:red; padding:2px 10px;">ဖျက်</button>
                </div>
            `).join('');
        }

        function deleteGame(index) {
            let games = JSON.parse(localStorage.getItem('myGames') || '[]');
            games.splice(index, 1);
            localStorage.setItem('myGames', JSON.stringify(games));
            renderGames();
        }
    </script>
</body>
</html>
        }

        function loadAdminGames() {
            db.ref('games').on('value', (snap) => {
                const list = document.getElementById('admin-game-list');
                list.innerHTML = "";
                snap.forEach((child) => {
                    list.innerHTML += `
                        <div class="admin-item">
                            <span>${child.val().title}</span>
                            <button class="delete-btn" onclick="deleteGame('${child.key}')">Delete</button>
                        </div>
                    `;
                });
            });
        }

        function deleteGame(id) {
            if(confirm("Are U Sure to delete?")) db.ref('games').child(id).remove();
        }
    </script>
</body>
<            <option value="Action">Action</option>
            <option value="Racing">Racing</option>
            <option value="Horror">Horror</option>
            <option value="Adventure">Adventure</option>
        </select>

        <button onclick="uploadGame()">Upload</button>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-database-compat.js"></script>
    <script>
        // 
const randomPW = Math.floor(1000 + Math.random() * 9000).toString();

// 
console.log("Admin Random Password is: " + randomPW);

// Emergency Password
const emergencyPW = "9999"; 

function checkLogin() {
    const pass = document.getElementById('passInput').value;

    
    if(pass === randomPW || pass === emergencyPW) {
        alert("Login Success!");
        document.getElementById('loginBox').style.display = "none";
    } else {
        alert("incorrect password!");
    }
        }
        
    </script>
</body>
</html>
